<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>bubble_protocol package &mdash; Bubble v1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bubble项目" href="../Bubble%E9%A1%B9%E7%9B%AE.html" />
    <link rel="prev" title="API-documentation" href="../API-documentation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Bubble
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html">快速开始</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E6%95%99%E7%A8%8B.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E7%AE%97%E6%B3%95%E5%8E%9F%E7%90%86%E5%8F%8A%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0.html">算法原理及功能实现</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E8%AE%BE%E8%AE%A1.html">设计</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E5%BC%80%E5%8F%91%E8%80%85%E6%8C%87%E5%8D%97.html">开发者指南</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../API-documentation.html">API-documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">bubble_protocol package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Bubble%E9%A1%B9%E7%9B%AE.html">Bubble项目</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Bubble%E8%B5%84%E6%BA%90.html">Bubble资源</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E5%85%B3%E4%BA%8E%E6%88%91%E4%BB%AC.html">关于我们</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bubble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../API-documentation.html">API-documentation</a> &raquo;</li>
      <li>bubble_protocol package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/API-docs/bubble_protocol.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bubble-protocol-package">
<h1>bubble_protocol package<a class="headerlink" href="#bubble-protocol-package" title="Permalink to this heading"></a></h1>
<p>This module maintains the functions related to robot communication, and the sub-module relationship is shown in the figure below:</p>
<img alt="../_images/protocol_packages.png" src="../_images/protocol_packages.png" />
<section id="module-bubble_protocol.protocol">
<span id="bubble-protocol-protocol-module"></span><h2>bubble_protocol.protocol module<a class="headerlink" href="#module-bubble_protocol.protocol" title="Permalink to this heading"></a></h2>
<p>This module defines the basic data structure 
of the communication protocol. 
The communication protocol documentation see 
<a class="reference external" href="https://birdiebot.github.io/bubble_documentation/guide/%E6%9C%A8%E9%B8%A2%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE.html">Birdiebot Communication protocol</a> .</p>
<dl class="py class">
<dt class="sig sig-object py" id="bubble_protocol.protocol.BCP_FRAME">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bubble_protocol.protocol.</span></span><span class="sig-name descname"><span class="pre">BCP_FRAME</span></span><a class="headerlink" href="#bubble_protocol.protocol.BCP_FRAME" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>BCP FRAME. 
More infomation, see <a class="reference external" href="https://birdiebot.github.io/bubble_documentation/guide/%E6%9C%A8%E9%B8%A2%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE.html">Birdiebot Communication protocol</a></p>
<dl class="simple">
<dt>info: <cite>list</cite></dt><dd><p>The data of frame.</p>
</dd>
<dt>sumcheck: <cite>int</cite></dt><dd><p>Sum check of data frame.</p>
</dd>
<dt>addcheck: <cite>int</cite></dt><dd><p>Additional of data frame.</p>
</dd>
</dl>
<dl class="simple">
<dt>setData(self, data: bytes)</dt><dd><p>Add data to info list, and calculate check value at the same time.</p>
</dd>
<dt>getData(self)</dt><dd><p>Gets all values of the current data.</p>
</dd>
<dt>combineCheck(self)</dt><dd><p>Set the final check values of the data frame.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bubble_protocol.protocol</span> <span class="kn">import</span> <span class="n">BCP_FRAME</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_packet</span> <span class="o">=</span> <span class="n">BCP_FRAME</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_packet</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="mi">55</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_packet</span><span class="o">.</span><span class="n">combineCheck</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">current_packet</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span>
<span class="go">bytearray(b&#39;777&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">current_packet</span><span class="o">.</span><span class="n">getData</span><span class="p">()]</span>
<span class="go">[55, 55, 55]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.protocol.BCP_FRAME.combineCheck">
<span class="sig-name descname"><span class="pre">combineCheck</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.protocol.BCP_FRAME.combineCheck" title="Permalink to this definition"></a></dt>
<dd><p>Set the final check values of the data frame.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.protocol.BCP_FRAME.getData">
<span class="sig-name descname"><span class="pre">getData</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytearray</span></span></span><a class="headerlink" href="#bubble_protocol.protocol.BCP_FRAME.getData" title="Permalink to this definition"></a></dt>
<dd><p>Gets all values of the current data.</p>
<dl class="simple">
<dt><cite>bytearray</cite></dt><dd><p>all values of the current data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.protocol.BCP_FRAME.setData">
<span class="sig-name descname"><span class="pre">setData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.protocol.BCP_FRAME.setData" title="Permalink to this definition"></a></dt>
<dd><p>Add data to info list, and calculate check value at the same time.</p>
<dl class="simple">
<dt>data: <cite>bytes</cite></dt><dd><p>The data to be added.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bubble_protocol.protocol.BCP_TX_FRAME">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bubble_protocol.protocol.</span></span><span class="sig-name descname"><span class="pre">BCP_TX_FRAME</span></span><a class="headerlink" href="#bubble_protocol.protocol.BCP_TX_FRAME" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#bubble_protocol.protocol.BCP_FRAME" title="bubble_protocol.protocol.BCP_FRAME"><code class="xref py py-class docutils literal notranslate"><span class="pre">BCP_FRAME</span></code></a></p>
<p>BCP transfer frame. 
if the data frame only needs to be received by local MCU, 
you can use <code class="docutils literal notranslate"><span class="pre">BCP_TX_FRAME</span></code>.</p>
<p><a class="reference internal" href="#bubble_protocol.protocol.BCP_FRAME" title="bubble_protocol.protocol.BCP_FRAME"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bubble_protocol.protocol.BCP_FRAME()</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bubble_protocol.protocol.BCP_TX_FRAME.INFO">
<span class="sig-name descname"><span class="pre">INFO</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#bubble_protocol.protocol.BCP_TX_FRAME.INFO" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bubble_protocol.protocol.BCP_TX_FRAME.d_addr">
<span class="sig-name descname"><span class="pre">d_addr</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#bubble_protocol.protocol.BCP_TX_FRAME.d_addr" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-bubble_protocol.dispatch">
<span id="bubble-protocol-dispatch-module"></span><h2>bubble_protocol.dispatch module<a class="headerlink" href="#module-bubble_protocol.dispatch" title="Permalink to this heading"></a></h2>
<p>Robot communication dispatch layer, 
this module is the bridge between DDS and serial port hardware. 
Through the module, 
a BCP frame can be initialized to receive the data transmitted by DDS 
and send the data to MCU. 
At the same time, the data received by the onboard computer will also be 
transmitted to the DDS through this module 
to be received by other subscribers.</p>
<dl class="py class">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bubble_protocol.dispatch.</span></span><span class="sig-name descname"><span class="pre">RobotAPI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'standard'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></p>
<p>Generate a new BCP core.</p>
<dl class="simple">
<dt>robot_status: <cite>RobotStatus</cite></dt><dd><p>The robot current status.</p>
</dd>
<dt>robot_serial: <cite>Serial</cite></dt><dd><p>Onboard serial port object.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bubble_protocol.dispatch</span> <span class="kn">import</span> <span class="n">RobotAPI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">core</span> <span class="o">=</span> <span class="n">RobotAPI</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.api_init">
<span class="sig-name descname"><span class="pre">api_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.api_init" title="Permalink to this definition"></a></dt>
<dd><p>General information API of robot definition.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.barrel_callback">
<span class="sig-name descname"><span class="pre">barrel_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Shooter</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.barrel_callback" title="Permalink to this definition"></a></dt>
<dd><p>Shooter function, send enable shooter infomation to MCU.</p>
<dl class="simple">
<dt>msg: <cite>Shooter</cite></dt><dd><p>A mode message is received</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.ex_chassis_callback">
<span class="sig-name descname"><span class="pre">ex_chassis_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Chassis</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.ex_chassis_callback" title="Permalink to this definition"></a></dt>
<dd><p>Chassis function, send chassis infomation to MCU.</p>
<dl class="simple">
<dt>msg: <cite>Chassis</cite></dt><dd><p>A chassis message is received</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.ex_odom_callback">
<span class="sig-name descname"><span class="pre">ex_odom_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PoseWithCovariance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.ex_odom_callback" title="Permalink to this definition"></a></dt>
<dd><p>Odoo function, send chassis infomation to MCU.</p>
<dl class="simple">
<dt>msg: <cite>PoseWithCovariance</cite></dt><dd><p>A chassis message is received</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.gimbal_callback">
<span class="sig-name descname"><span class="pre">gimbal_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Gimbal</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.gimbal_callback" title="Permalink to this definition"></a></dt>
<dd><p>gimbal function, send gimbal infomation to MCU.</p>
<dl class="simple">
<dt>msg: <cite>Gimbal</cite></dt><dd><p>A mode message is received</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.heartbeat">
<span class="sig-name descname"><span class="pre">heartbeat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.heartbeat" title="Permalink to this definition"></a></dt>
<dd><p>heartbeat function, send heartbeat frames periodically.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.init_robot">
<span class="sig-name descname"><span class="pre">init_robot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.init_robot" title="Permalink to this definition"></a></dt>
<dd><p>Expanded api definition, API required by the special robot is initialized.</p>
<dl class="simple">
<dt>name: <cite>str</cite></dt><dd><p>robot name, name option reference 
<a class="reference external" href="https://birdiebot.github.io/bubble_documentation/guide/%E6%9C%AF%E8%AF%AD%E4%B8%AD%E8%8B%B1%E6%96%87%E5%AF%B9%E7%85%A7%E8%A1%A8.html">The Chinese-English comparison table</a> .</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.dispatch.RobotAPI.mode_ctrl_callback">
<span class="sig-name descname"><span class="pre">mode_ctrl_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Int8</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.dispatch.RobotAPI.mode_ctrl_callback" title="Permalink to this definition"></a></dt>
<dd><p>mode control function, send mode infomation to MCU.</p>
<dl class="simple">
<dt>msg: <cite>Int8</cite></dt><dd><p>A mode message is received</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-bubble_protocol.hardware">
<span id="bubble-protocol-hardware-module"></span><h2>bubble_protocol.hardware module<a class="headerlink" href="#module-bubble_protocol.hardware" title="Permalink to this heading"></a></h2>
<p>Robot communication dispatch layer,
The module sets the serial port rules, 
and analyzes the communication data 
between the onboard computer and MCU.</p>
<dl class="py class">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bubble_protocol.hardware.</span></span><span class="sig-name descname"><span class="pre">RobotSerial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/dev/ttyUSB0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baudrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">921600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Serial</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.init_device">
<span class="sig-name descname"><span class="pre">init_device</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baudrate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_T</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.init_device" title="Permalink to this definition"></a></dt>
<dd><p>UART device initialization parameters setting</p>
<blockquote>
<div><dl class="simple">
<dt>port: <cite>str</cite></dt><dd><p>Com port path</p>
</dd>
<dt>baudrate: <cite>int</cite></dt><dd><p>Serial port baudrate</p>
</dd>
<dt>timeout_T: <cite>int</cite></dt><dd><p>Timeout</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.init_protocol">
<span class="sig-name descname"><span class="pre">init_protocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.init_protocol" title="Permalink to this definition"></a></dt>
<dd><p>Initialize protocol frame param used robot name.</p>
<blockquote>
<div><dl class="simple">
<dt>name: <cite>str</cite></dt><dd><p>robot name</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.onboard_data_analysis">
<span class="sig-name descname"><span class="pre">onboard_data_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_packet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bubble_protocol.protocol.BCP_FRAME" title="bubble_protocol.protocol.BCP_FRAME"><span class="pre">BCP_FRAME</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.onboard_data_analysis" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>current_packet: <cite>BCP_FRAME</cite></dt><dd><p>Update robot status by successfully parsed BCP frame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.process" title="Permalink to this definition"></a></dt>
<dd><p>Thread handing functions. 
The buffer data is periodically taken out by timer 
for updating robot status or sending to MCU.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.reset_rx_buffer">
<span class="sig-name descname"><span class="pre">reset_rx_buffer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.reset_rx_buffer" title="Permalink to this definition"></a></dt>
<dd><p>Reset receive buffer</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.rx_function">
<span class="sig-name descname"><span class="pre">rx_function</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.rx_function" title="Permalink to this definition"></a></dt>
<dd><p>The data in the buffer is parsed periodically, 
the function will put BCP freme to <code class="docutils literal notranslate"><span class="pre">current_packet</span></code> if data is parsed successfully.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.send">
<span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytearray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.send" title="Permalink to this definition"></a></dt>
<dd><p>Write string to UART.</p>
<dl class="simple">
<dt>data: <cite>bytearray</cite></dt><dd><p>The data stream to be send</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.send_data">
<span class="sig-name descname"><span class="pre">send_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.send_data" title="Permalink to this definition"></a></dt>
<dd><p>Convert data that needs to be send to MCU into BCP frame datas.</p>
<dl class="simple">
<dt>name: <cite>str</cite></dt><dd><p>robot name.</p>
</dd>
<dt>info: <cite>list</cite></dt><dd><p>A list of data to send.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.hardware.RobotSerial.setFrameData">
<span class="sig-name descname"><span class="pre">setFrameData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#bubble_protocol.protocol.BCP_TX_FRAME" title="bubble_protocol.protocol.BCP_TX_FRAME"><span class="pre">BCP_TX_FRAME</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">OrderedDict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.hardware.RobotSerial.setFrameData" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-bubble_protocol.robot_status">
<span id="bubble-protocol-robot-status-module"></span><h2>bubble_protocol.robot_status module<a class="headerlink" href="#module-bubble_protocol.robot_status" title="Permalink to this heading"></a></h2>
<p>Robot communication status layer,
and this module may be refactored in the future.
This module will publish the robot status data sent by MCU
to onboard to DDS for other subscriber to receice.</p>
<dl class="py class">
<dt class="sig sig-object py" id="bubble_protocol.robot_status.RobotStatus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bubble_protocol.robot_status.</span></span><span class="sig-name descname"><span class="pre">RobotStatus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.robot_status.RobotStatus" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Send robot status information.</p>
<dl class="simple">
<dt>node: <cite>Node</cite></dt><dd><p>Node of maintain robot status information.</p>
</dd>
<dt>status: <cite>STATUS</cite></dt><dd><p>Robot current status data.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.robot_status.RobotStatus.non_realtime_status">
<span class="sig-name descname"><span class="pre">non_realtime_status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.robot_status.RobotStatus.non_realtime_status" title="Permalink to this definition"></a></dt>
<dd><p>The function defines data publish rules of 
robot’s non-realtime status. It will executed perodically by timer. 
The period is usually 1 second.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bubble_protocol.robot_status.RobotStatus.status_init">
<span class="sig-name descname"><span class="pre">status_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#bubble_protocol.robot_status.RobotStatus.status_init" title="Permalink to this definition"></a></dt>
<dd><p>The function defines publishes required for the robot status.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-bubble_protocol.bcp_core">
<span id="bubble-protocol-bcp-core-module"></span><h2>bubble_protocol.bcp_core module<a class="headerlink" href="#module-bubble_protocol.bcp_core" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="bubble_protocol.bcp_core.main">
<span class="sig-prename descclassname"><span class="pre">bubble_protocol.bcp_core.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bubble_protocol.bcp_core.main" title="Permalink to this definition"></a></dt>
<dd><p>BCP core entrance.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../API-documentation.html" class="btn btn-neutral float-left" title="API-documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Bubble%E9%A1%B9%E7%9B%AE.html" class="btn btn-neutral float-right" title="Bubble项目" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Birdiebot R&amp;D Department Shanghai University Of Engineering Science.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>